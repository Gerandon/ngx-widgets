<div class="basic-input cva-input">
  <mat-form-field [appearance]="appearance() ?? _appearance()"
                  [color]="color() ?? _color()"
                  [subscriptSizing]="subscriptSizing()"
                  [hintLabel]="hintLabel()"
                  [floatLabel]="floatLabel()">
    @if (label) {
      <mat-label [class.disabled]="isDisabled()">{{label}}</mat-label>
    }
    @if(mask()) {
      <input
        [id]="id"
        #inputElement
        #input="ngForm"
        #maskInput="ngxMask"
        matInput
        [style.padding-right]="(suffix || prefixIcon) && '35px'"
        [type]="type()"
        [attr.disabled]="isDisabled() || control.disabled ? '' : null"
        [attr.aria-placeholder]="ariaPlaceholder() || placeholder"
        [attr.aria-label]="ariaLabel() || label"
        [attr.aria-describedby]="ariaDescribedBy()"
        [attr.aria-description]="ariaDescription()"
        [readonly]="isDisabled()"
        [placeholder]="placeholder"
        [formControl]="control"
        [maxLength]="maxLength()"
        [name]="name"
        [mask]="mask()"
        [triggerOnMaskChange]="true"
        [showMaskTyped]="showMaskTyped()"
        [specialCharacters]="specialCharacters()!"
        [placeHolderCharacter]="placeHolderCharacter()!"
        [prefix]="maskPrefix()"
        [suffix]="maskSuffix()"
      />
    } @else {
      <input
        [id]="id"
        #inputElement
        #input="ngForm"
        matInput
        [style.padding-right]="(suffix || prefixIcon) && '35px'"
        [type]="type()"
        [attr.disabled]="isDisabled() || control.disabled ? '' : null"
        [attr.aria-placeholder]="ariaPlaceholder() || placeholder"
        [attr.aria-label]="ariaLabel() || label"
        [attr.aria-describedby]="ariaDescribedBy()"
        [attr.aria-description]="ariaDescription()"
        [readonly]="isDisabled()"
        [placeholder]="placeholder"
        [formControl]="control"
        [maxLength]="maxLength()"
        [name]="name"
      />
    }
    @if (prefixIcon) {
      <mat-icon matPrefix color="accent">
        {{prefixIcon}}
      </mat-icon>
    }
    @if (suffixIcon) {
      <mat-icon matSuffix color="accent">
        {{suffixIcon}}
      </mat-icon>
    }
    @if (suffix) {
      <span matSuffix style="margin-right: 10px">{{suffix}}</span>
    }

    @if (control.errors?.['server']) {
      <mat-error>{{ control.errors?.['server'] }}</mat-error>
    }
    @for (errorKey of controlErrorKeys; track errorKey) {
      <mat-error>
        @if(validatorMessages()?.[errorKey]) {
          {{ validatorMessages()![errorKey] }}
        } @else if (!!validationTranslations?.[errorKey]) {
          {{ validationTranslations[errorKey] }}
        }
      </mat-error>
    }
  </mat-form-field>
</div>
