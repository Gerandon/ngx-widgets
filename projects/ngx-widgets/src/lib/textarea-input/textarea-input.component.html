<div class="textarea-input cva-input">
  <mat-form-field [appearance]="appearance() ?? _appearance()"
                  [color]="color() ?? _color()"
                  [subscriptSizing]="subscriptSizing()"
                  [floatLabel]="floatLabel()">
    @if (label) {
      <mat-label [class.disabled]="isDisabled()">{{ label }}</mat-label>
    }
    <textarea
      [id]="id"
      #inputElement
      #input="ngForm"
      #autosize="cdkTextareaAutosize"
      matInput
      cdkTextareaAutosize
      [cdkAutosizeMinRows]="rows()"
      class="w-100 cva-control"
      [attr.disabled]="isDisabled() || control.disabled ? '' : null"
      [attr.aria-placeholder]="ariaPlaceholder() || placeholder"
      [attr.aria-label]="ariaLabel() || label"
      [attr.aria-describedby]="ariaDescribedBy()"
      [attr.aria-description]="ariaDescription()"
      [readonly]="isDisabled()"
      [placeholder]="placeholder"
      [formControl]="control"
      [maxLength]="maxLength()"
      [name]="name">
    </textarea>
    <span class="counter">{{control.value?.length || 0}} / {{ maxLength() }}</span>
    @if (prefixIcon) {
      <mat-icon matPrefix color="accent">
        {{prefixIcon}}
      </mat-icon>
    }
    @if (suffixIcon) {
      <mat-icon matSuffix color="accent">
        {{suffixIcon}}
      </mat-icon>
    }
    @if (suffix) {
      <span matSuffix>{{suffix}}</span>
    }
    @if (control.errors?.['server']) {
      <mat-error>{{ control.errors?.['server'] }}</mat-error>
    }
    @for (errorKey of controlErrorKeys; track errorKey) {
      <mat-error>
        @if(validatorMessages()?.[errorKey]) {
          {{ validatorMessages()![errorKey] }}
        } @else if (!!validationTranslations?.[errorKey]) {
          {{ validationTranslations[errorKey] }}
        }
      </mat-error>
    }
  </mat-form-field>
</div>
